



build ./imports/jhu/series/raw-csv/confirmed.csv : fetch-curl $
        | ${ninja_force}
    url = 'https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_19-covid-Confirmed.csv'
    # url = 'https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_confirmed_global.csv'

build ./imports/jhu/series/raw-csv/deaths.csv : fetch-curl $
        | ${ninja_force}
    url = 'https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_global.csv'
    # url = 'https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_19-covid-Deaths.csv'

build ./imports/jhu/series/raw-csv/recovered.csv : fetch-curl $
        | ${ninja_force}
    url = 'https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_19-covid-Recovered.csv'




build ./imports/jhu/series/raw-json/confirmed.json : csv-to-json $
        ./imports/jhu/series/raw-csv/confirmed.csv $
        | ./sources/csv-to-json.py ${zrun_library}
    dataset = confirmed
    pool = cpu_moderate

build ./imports/jhu/series/raw-json/recovered.json : csv-to-json $
        ./imports/jhu/series/raw-csv/recovered.csv $
        | ./sources/csv-to-json.py ${zrun_library}
    dataset = recovered
    pool = cpu_moderate

build ./imports/jhu/series/raw-json/deaths.json : csv-to-json $
        ./imports/jhu/series/raw-csv/deaths.csv $
        | ./sources/csv-to-json.py ${zrun_library}
    dataset = deaths
    pool = cpu_moderate

build ./imports/jhu/series/raw-json/merged.json : z-run-out-in $
        ./imports/jhu/series/raw-json/confirmed.json $
        ./imports/jhu/series/raw-json/recovered.json $
        ./imports/jhu/series/raw-json/deaths.json $
        | ./sources/jhu-imports-merged.jq ${zrun_library}
    scriptlet = ':: process / jhu / imports / merge'
    pool = cpu_heavy




build ./imports/jhu/series/locations.json : z-run-in-out $
        ./imports/jhu/series/raw-json/merged.json $
        | ./imports/facts/countries.json $
          ./imports/facts/countries-by-alias.json $
          ./sources/jhu-imports-locations.jq ${zrun_library}
    scriptlet = ':: process / jhu / imports / locations'
    pool = cpu_moderate

build ./imports/jhu/series/dates.json : z-run-in-out $
        ./imports/jhu/series/raw-json/merged.json $
        | ./sources/jhu-imports-dates.jq ${zrun_library}
    scriptlet = ':: process / jhu / imports / dates'
    pool = cpu_moderate

build ./imports/jhu/series/values.json : z-run-in-out $
        ./imports/jhu/series/raw-json/merged.json $
        | ./imports/jhu/series/locations.json $
          ./imports/jhu/series/dates.json $
          ./imports/facts/countries.json $
          ./imports/factbook/fields.json $
          ./sources/jhu-imports-values.jq ${zrun_library}
    scriptlet = ':: process / jhu / imports / values'
    pool = cpu_heavy




build ./exports/jhu/v1/values.json : z-run-in-out $
        ./imports/jhu/series/values.json $
        | ./sources/jhu-exports-values-json.jq ${zrun_library}
    scriptlet = ':: process / jhu / exports / values / json'
    pool = cpu_heavy

build ./exports/jhu/v1/values.tsv : z-run-in-out $
        ./exports/jhu/v1/values.json $
        | ./sources/jhu-exports-values-tsv.jq ${zrun_library}
    scriptlet = ':: process / jhu / exports / values / tsv'
    pool = cpu_heavy

